{% extends "base.html" %}
{% block content %}

    <div class="container">
        <h5 class="center page-header">Enter your logon details here to view your Life Tracker data</h5>
            
        <form method="POST" action="{{ url_for('logon') }}">
            <div class="row">
                <div class="input-field col s10 offset-s1 m8 offset-m2 l6 offset-l3 center">
                    <i class="material-icons prefix icon-grey">email</i>
                    <input id="user_email" name="user_email" type="email" class="validate" required="" aria-required="true">
                    <label for="user_email">Enter your Email</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s10 offset-s1 m8 offset-m2 l6 offset-l3 center">
                    <i class="material-icons prefix icon-grey">verified_user</i>
                    <input id="user_password" name="user_password" type="password" class="validate" minlength="6" required="" aria-required="true">
                    <label for="user_password">Password (min 6 chars)</label>
                </div>
            </div>
            <div class="row center input-field col s10 offset-s1 m8 offset-m2 l6 offset-l3 center">
                    <p class="centered-text small-text">
                        These are the standard terms and conditions for using Life Tracker. <br> Only use your Life Tracker account if you trust us, but we are good people.
                    </p>
            </div>
            <div class="row center">
                <button class="btn waves-effect waves-light orange darken-1 default" id="btnTandCs" type="submit" name="action">Submit
                    <i class="material-icons right">send</i>
                </button>
            </div>  
        </form>
    </div>

<script>
    function EnableRegistration() {
    var button = document.getElementById("btnTandCs");
    var email = document.getElementById("user_email").value;
    var username = document.getElementById("user_display_name").value;
    var pw = document.getElementById("user_password").value;
    var pw_validate = document.getElementById("user_password_validate").value;       
    var valid = true;

        if (validateEmail(email) == false) {
            valid = false;
        }

        if (username.length == 0) {
            valid = false;
        }

        if (pw.length > 0) {
            if (pw != pw_validate) {
                valid = false;
                document.getElementById("user_password_validate").classList.add("invalid");
            }
        } else {
            valid = false;
        }

        if (valid) {
            button.classList.toggle('disabled');
        } else {
            alert("There ia a problem with the data entered!");
            document.getElementById("chkTerms").checked = false;
        }
    }

    function validateEmail(email) {
        var re = /\S+@\S+\.\S+/;
        return re.test(email);
    }

</script>
{% endblock %}